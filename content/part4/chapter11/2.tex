An instance of the Triple class represents the target platform LLVM is producing code for. To support a new architecture, the first task is to extend the Triple class. In the llvm/include/ llvm/TargetParser/Triple.h file, add a member to the ArchType enumeration along with a new predicate:

\begin{cpp}
class Triple {
public:
    enum ArchType {
        // Many more members
        m88k, // M88000 (big endian): m88k
    };

    /// Tests whether the target is M88k.
    bool isM88k() const {
        return getArch() == Triple::m88k;
    }
    // Many more methods
};
\end{cpp}

Inside the llvm/lib/TargetParser/Triple.cpp file, there are many methods that use the ArchType enumeration. You need to extend all of them; for example, in the getArchTypeName() method, you need to add a new case statement as follows:

\begin{cpp}
switch (Kind) {
    // Many more cases
    case m88k: return "m88k";
}
\end{cpp}

Most times, the compiler will warn you if you forget to handle the new m88k enumeration member in one of the functions. Next, we will expand the Executable and Linkable Format (ELF).

































